{"version":3,"sources":["pages/home/home.jsx"],"names":["home","props","openUrl","params","url","window","open","getData","state","loading","setState","axios","get","then","resp","status","Error","data","content","str","Buffer","from","toString","arrs","JSON","parse","catch","e","console","log","finally","delete","options","children","label","this","className","placeholder","onChange","text","tree","filter","onClick","ref","highlightCurrent","nodeKey","indent","defaultExpandedKeys","accordion","onNodeClicked","filterNodeMethod","value","title","indexOf","Component"],"mappings":"iSAMqBA,E,kDACjB,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IAcVC,QAAU,SAAAC,GACDA,EAAOC,KACZC,OAAOC,KAAKH,EAAOC,IAAK,WAjBT,EAoBnBG,QAAU,WACF,EAAKC,MAAMC,UACf,EAAKC,SAAS,CACVD,SAAS,IAEbE,IACKC,IAAI,2GAEJC,MAAK,SAAAC,GACF,GAAoB,MAAhBA,EAAKC,OAOF,MAAM,IAAIC,MAAM,WANnB,IAAIC,EAAOH,EAAKG,KAAKC,QACjBC,EAAMC,EAAOC,KAAKJ,EAAM,UAAUK,WAClCC,EAAOC,KAAKC,MAAMN,GACtB,EAAKT,SAAS,CACVO,KAAMM,OAIjBG,OAAM,SAAAC,GACHC,QAAQC,IAAR,IAAiBF,MAEpBG,SAAQ,WACL,EAAKpB,SAAS,CACVD,SAAS,SA3CN,EAgDnBsB,OAAS,WACL,EAAKrB,SAAS,CACVO,KAAM,MAhDV,EAAKT,MAAQ,CACTS,KAAM,GACNe,QAAS,CACLC,SAAU,WACVC,MAAO,SAEXzB,SAAS,GARE,E,gEAYf0B,KAAK5B,Y,+BA0CC,IAAD,SAC8B4B,KAAK3B,MAAhCS,EADH,EACGA,KAAMe,EADT,EACSA,QAASvB,EADlB,EACkBA,QAEvB,OACI,sBAAK2B,UAAU,OAAf,UACI,sBAAKA,UAAU,SAAf,UACI,cAAC,QAAD,CAAOC,YAAY,yDAAYC,SAAU,SAAAC,GAAI,OAAI,EAAKC,KAAKC,OAAOF,MAClE,cAAC,SAAD,CAAQG,QAASP,KAAK5B,QAAtB,0BACA,cAAC,SAAD,CAAQmC,QAASP,KAAKJ,OAAtB,6BAEJ,cAAC,UAAD,CAAStB,QAASA,EAAlB,SACI,cAAC,OAAD,CACIkC,IAAK,SAAAhB,GAAC,OAAK,EAAKa,KAAOb,GACvBV,KAAMA,EACN2B,kBAAkB,EAClBZ,QAASA,EACTa,QAAQ,KACRC,OAAQ,GACRC,oBAAqB,CAAC,KAEtBC,WAAW,EAUXC,cAAed,KAAKjC,QACpBgD,iBAAkB,SAACC,EAAOlC,GACtB,OAAKkC,IACiC,IAA/BlC,EAAKmC,MAAMC,QAAQF,e,GAxFpBG,c","file":"static/js/4.5ac26395.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport './home.scss';\r\nimport { Tree, Input, Button, Loading } from 'element-react';\r\nimport 'element-theme-default';\r\nimport axios from 'axios';\r\n\r\nexport default class home extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            data: [],\r\n            options: {\r\n                children: 'children',\r\n                label: 'title',\r\n            },\r\n            loading: false,\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        this.getData();\r\n    }\r\n\r\n    openUrl = params => {\r\n        if (!params.url) return;\r\n        window.open(params.url, '_blank');\r\n    };\r\n\r\n    getData = () => {\r\n        if (this.state.loading) return;\r\n        this.setState({\r\n            loading: true,\r\n        });\r\n        axios\r\n            .get('https://api.github.com/repos/liqiang-xxfy/chrome-bookmark/contents/docs/chrome-bookmark.json?ref=master')\r\n            // .get('@/../public/chrome-bookmark.json')\r\n            .then(resp => {\r\n                if (resp.status === 200) {\r\n                    let data = resp.data.content;\r\n                    let str = Buffer.from(data, 'base64').toString();\r\n                    let arrs = JSON.parse(str);\r\n                    this.setState({\r\n                        data: arrs,\r\n                    });\r\n                } else throw new Error('no data');\r\n            })\r\n            .catch(e => {\r\n                console.log(`e`, e);\r\n            })\r\n            .finally(() => {\r\n                this.setState({\r\n                    loading: false,\r\n                });\r\n            });\r\n    };\r\n\r\n    delete = () => {\r\n        this.setState({\r\n            data: [],\r\n        });\r\n    };\r\n\r\n    render() {\r\n        const { data, options, loading } = this.state;\r\n        // console.log(`json`, json);\r\n        return (\r\n            <div className=\"home\">\r\n                <div className=\"search\">\r\n                    <Input placeholder=\"输入关键字进行过滤\" onChange={text => this.tree.filter(text)} />\r\n                    <Button onClick={this.getData}>更新</Button>\r\n                    <Button onClick={this.delete}>删除</Button>\r\n                </div>\r\n                <Loading loading={loading}>\r\n                    <Tree\r\n                        ref={e => (this.tree = e)}\r\n                        data={data}\r\n                        highlightCurrent={true}\r\n                        options={options}\r\n                        nodeKey=\"id\"\r\n                        indent={25}\r\n                        defaultExpandedKeys={['1']}\r\n                        // defaultExpandAll={true}\r\n                        accordion={true}\r\n                        // renderContent={(nodeModel, data, store) => {\r\n                        //     console.log(`nodeModel`, nodeModel);\r\n                        //     return (\r\n                        //         <span>\r\n                        //             <img src={data.url} />\r\n                        //             <span className=\"el-tree-node__label\">{data.title}</span>\r\n                        //         </span>\r\n                        //     );\r\n                        // }}\r\n                        onNodeClicked={this.openUrl}\r\n                        filterNodeMethod={(value, data) => {\r\n                            if (!value) return true;\r\n                            return data.title.indexOf(value) !== -1;\r\n                        }}\r\n                    />\r\n                </Loading>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"],"sourceRoot":""}